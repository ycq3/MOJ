webpackJsonp([13],{220:function(t,a,s){var e=s(3)(s(223),s(224),!1,function(t){s(221)},"data-v-2bf152ba",null);t.exports=e.exports},221:function(t,a,s){var e=s(222);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(20)("f022f530",e,!0,{})},222:function(t,a,s){(t.exports=s(7)(!1)).push([t.i,"",""])},223:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={name:"paging",props:{pageId:String},data:function(){return{id:this.pageId,pageNumber:5,currentPage:1,pageTotal:10,beginPage:1,currentIndex:1,goPageNumber:1,goPageError:"请输入页数",isLock:!1}},methods:{changePage:function(t){this.currentIndex=t,$("#pageNumber").removeClass("is-invalid"),$("#"+this.id+" li").filter(".active").removeClass("active"),$("#"+this.id+" li").filter(".disabled").removeClass("disabled"),1==this.currentPage&&$("#"+this.id+" li").first().addClass("disabled"),this.currentPage==this.pageTotal&&$("#"+this.id+" li").last().addClass("disabled"),$("#"+this.id+" li").eq(t).addClass("active")},nextPage:function(t){if(this.isLock)this.$toastr.e("请稍后再试！");else{$("#pageNumber").removeClass("is-invalid");var a=new RegExp("^[0-9]*[1-9][0-9]*$");""==t?($("#pageNumber").addClass("is-invalid"),this.goPageError="请输入页数！"):t>this.pageTotal||t<1?($("#pageNumber").addClass("is-invalid"),this.goPageError="超出页数范围！"):a.test(t)?this.currentPage=t:($("#pageNumber").addClass("is-invalid"),this.goPageError="输入不合法！")}},goPage:function(){var t,a=this.currentPage;this.pageNumber<5?(this.beginPage=1,t=a-0):a-2<1?(this.beginPage=1,t=a-0):this.pageTotal-a<2?(this.beginPage=this.pageTotal-4,t=a-this.beginPage+1):(this.beginPage=a-2,t=3),this.changePage(t)},initPage:function(t){$("#pageNumber").removeClass("is-invalid"),$("#"+this.id+" li").filter(".active").removeClass("active"),$("#"+this.id+" li").filter(".disabled").removeClass("disabled"),this.pageNumber=t<5?t:5,this.pageTotal=t,0==t&&(this.pageNumber=1,this.pageTotal=1),this.currentPage=1,this.beginPage=1,this.currentIndex=1,this.goPageNumber=1,this.goPageError="请输入页数",$("#"+this.id+" li").first().addClass("disabled"),this.currentPage==this.pageTotal&&$("#"+this.id+" li").last().addClass("disabled"),$("#"+this.id+" li").eq(1).addClass("active")},unLock:function(){this.isLock=!1},locking:function(){this.isLock=!0}},watch:{currentPage:function(){this.$emit("page-change",this.currentPage)}}}},224:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("ul",{staticClass:"pagination mx-auto",attrs:{id:t.id}},[s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link disabled",attrs:{href:"javaScript:;"},on:{click:function(a){t.nextPage(t.currentPage-1)}}},[t._v("«")])]),t._v(" "),t._l(t.pageNumber,function(a){return s("li",{staticClass:"page-item",attrs:{value:a},on:{click:function(s){t.nextPage(t.beginPage+a-1)}}},[s("a",{staticClass:"page-link",attrs:{href:"javaScript:;"}},[t._v(t._s(t.beginPage+a-1))])])}),t._v(" "),s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"javaScript:;"},on:{click:function(a){t.nextPage(t.currentPage+1)}}},[t._v("»")])])],2)]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-group mx-auto col-7 col-sm-4"},[s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"pageNumber"}},[t._v(t._s(t.currentPage+"/"+t.pageTotal))])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.goPageNumber,expression:"goPageNumber"}],staticClass:"form-control",attrs:{id:"pageNumber",type:"text",name:"points",placeholder:"page",required:""},domProps:{value:t.goPageNumber},on:{input:function(a){a.target.composing||(t.goPageNumber=a.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-tooltip"},[t._v("\n                "+t._s(t.goPageError)+"\n            ")]),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){t.nextPage(t.goPageNumber)}}},[t._v("Go")])])])])])},staticRenderFns:[]}},243:function(t,a,s){var e=s(244);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(20)("e7055db0",e,!0,{})},244:function(t,a,s){(t.exports=s(7)(!1)).push([t.i,".table td[data-v-3ffd6edc],.table th[data-v-3ffd6edc]{text-align:center}",""])},245:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s(220),i=s.n(e);a.default={name:"contest",components:{paging:i.a},data:function(){return{contestTitle:"Contest List",searchTitle:"Search Contest:",searchText:"",submitText:"提交",contestHeadText:{id:"ID",name:"Name",beginTime:"Begin Time",endTime:"End Time",type:"Type",status:"Status"},type:{0:"Public",1:"Private",2:"Class"},contest_list:[],currentPage:-1,pageTotal:1,inputPassword:"",currentId:0,inputPasswordText:{title:"请输入比赛密码",submit:"确定",close:"关闭",errorMsg:""}}},methods:{load:function(){var t=this;this.$refs.page.locking();for(var a=this.contest_list.length,s=0;s<a;s++)this.contest_list.splice(0,1);axios.post("/contest",{page:this.currentPage,keyword:this.searchText}).then(function(a){var s=a.data.data;t.pageTotal=a.data.last_page,-1==t.currentPage&&t.$refs.page.initPage(t.pageTotal),s.forEach(function(t){var a=new Date(t.start_time),s=new Date(t.end_time),e=new Date;t.status=e<a?"Pending":e>s?"End":"Running",this.push(t)},t.contest_list),t.$refs.page.unLock()})},search:function(){this.currentPage=-1,this.load()},getPage:function(t){this.currentPage=t,this.load(),this.$refs.page.goPage()},enterDetail:function(t,a){this.currentId=t,0==this.globalLoginData.islogin?$("#login").modal("show"):0==this.globalLoginData.userData.verified?this.$toastr.e("您的邮箱尚未认证，无法进入比赛。"):1==a?($("#inputPassword").removeClass("is-invalid"),$("#inputModal").modal(),$("#inputModal").on("shown.bs.modal",function(t){$("#inputPassword").focus()})):this.$router.push("/contestDetail/"+t)},submitPassword:function(){var t=this;$("#inputPassword").removeClass("is-invalid"),""==this.inputPassword?(this.inputPasswordText.errorMsg="密码不能为空！",$("#inputPassword").addClass("is-invalid")):axios.post("/contest/check/"+this.currentId,{password:this.inputPassword}).then(function(a){var s=a.data;s.status?($("#inputModal").modal("hide"),t.$router.push("/contestDetail/"+t.currentId)):(t.inputPasswordText.errorMsg=s.message,$("#inputPassword").addClass("is-invalid"),t.inputPassword="")})}},mounted:function(){this.load()}}},246:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"row"},[s("h1",{staticClass:"col text-center"},[t._v(t._s(t.contestTitle))])]),t._v(" "),s("div",{staticClass:"row form-inline"},[s("div",{staticClass:"col text-center"},[s("strong",[t._v(t._s(t.searchTitle))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入比赛题目"},domProps:{value:t.searchText},on:{input:function(a){a.target.composing||(t.searchText=a.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-default",on:{click:t.search}},[t._v(t._s(t.submitText))])])])]),t._v(" "),s("div",{staticClass:"table-responsive card-body",staticStyle:{"overflow-y":"hidden"}},[s("table",{staticClass:"table"},[s("thead",[s("tr",t._l(t.contestHeadText,function(a){return s("th",[t._v(t._s(a))])}))]),t._v(" "),s("transition-group",{attrs:{name:"list",tag:"tbody"}},t._l(t.contest_list,function(a){return s("tr",{key:a.id,staticClass:"list-item",attrs:{id:"contest_list"}},[s("td",[t._v(t._s(a.id))]),t._v(" "),s("td",[s("a",{attrs:{href:"javaScript:;"},on:{click:function(s){t.enterDetail(a.id,a.type)}}},[t._v(t._s(a.title))])]),t._v(" "),s("td",[t._v(t._s(a.start_time))]),t._v(" "),s("td",[t._v(t._s(a.end_time))]),t._v(" "),s("td",[t._v(t._s(t.type[a.type]))]),t._v(" "),s("td",[t._v(t._s(a.status))])])}))],1)]),t._v(" "),s("paging",{ref:"page",staticClass:"card-footer",attrs:{"page-id":"contestPage"},on:{"page-change":t.getPage}})],1),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"inputModal",role:"dialog","aria-labelledby":"inputModal","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-sm",staticStyle:{top:"25%"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("span",{staticClass:"modal-title"},[t._v(t._s(t.inputPasswordText.title))]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])]),t._v(" "),s("div",{staticClass:"modal-body"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputPassword,expression:"inputPassword"}],staticClass:"form-control",attrs:{id:"inputPassword",type:"password",autofocus:"autofocus"},domProps:{value:t.inputPassword},on:{input:function(a){a.target.composing||(t.inputPassword=a.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v("\n                        "+t._s(t.inputPasswordText.errorMsg)+"\n                    ")])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{id:"submit"},on:{click:t.submitPassword}},[t._v(t._s(t.inputPasswordText.submit))]),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{"data-dismiss":"modal"}},[t._v(t._s(t.inputPasswordText.close))])])])])])])},staticRenderFns:[]}},345:function(t,a,s){var e=s(3)(s(245),s(246),!1,function(t){s(243)},"data-v-3ffd6edc",null);t.exports=e.exports}});